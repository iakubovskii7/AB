# Результаты экспериментов

## Методология экспериментов

1. Сэмплируем случайные величины с известными теоретическими параметрами

2. Параметры экспериментов:
- классические АБ тесты 
(распределение случайной величины, контрольное значение метрики, 
минимально обнаруживаемый эффект, размер выборки - величина эндогенная)
- байесовские методы (распределение случайной величины, 
контрольное значение метрики, минимально обнаруживаемый эффект,
размер выборки определяется формулой из классических АБ тестов,
критерий остановки)
- многорукие бандиты (распределение - биномиальное / бета, контрольное значение метрики,
минимально обнаруживаемый эффект, размер выборки определяется формулой из классических АБ тестов,
***размер батча!***, критерий остановки)

3. Для каждого известного распределения нам нужно провести 1000 экспериментов и смотреть на 
интересующие нас результаты.

4. Промежуточные результаты экспериментов:
- классические АБ-тесты (бутстрапированный доверительный интервал метрики, p-value тестов)
- байесовские методы (накопленное число юзеров, вероятность превосходства, 
ожидаемые потери, size effect)
- многорукие бандиты (накопленное число юзеров, вероятность превосходства, ожидаемые потери)

5. Конечные результаты экспериментов:
- классические АБ-тесты (доля FP, FN)
- байесовские методы (FP, FN; насколько меньше юзеров потребовалось для выявления эффектов)
- многорукие бандиты (FP, FN; насколько меньше юзеров потребовалось для выявления эффектов)
- сравнение раннего прерывания классического и байесовского тестов


# Конверсия 

1. Классический тест
2. Томпсон многорукий - изменяем сплит во время эксперимента
3. Томпсон однорукий - сплит всегда 50 на 50, критерий остановки - тот же

Написать классы 
- ***ABConversionTest***
- ***BatchedThompsonMixed***

На вход в эти классы: 
- p1_control
- mde
- batch_size_share

На выход:
- winner_dict (словарик, где ключ - опция в тесте, а значение - индекс победителя)
- intermediate_dict (словарик, где ключ - опция в тесте, а значения - кортеж с 
всевозможными промежуточными результатами тестирования)

